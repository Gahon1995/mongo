## MongoDB Server 部署说明

### 文件夹

- bj_multi

### 部署说明

在部署 docker 镜像之前需要先在 host 主机，也就是这个项目代码运行的主机上运行 `hostname \-f` 来获取当前的主机名，然后修改`docker-compose.yml`
文件中 rs-setup 的 environment 中的变量为当前的主机名

另外需要修改当前主机的 hosts，将 mongo-1-1 mono-2-1... 添加到 hosts 中去

#### bj、hk 文件夹说明

这两个文件夹主要是配置单节点的服务，推荐使用这种方法，该方案相对简单，同时基本不会出现啥问题，也不需要啥额外配置

#### bj_multi、hk_multi 文件夹说明

这两个文件夹主要是配置带有复制节点的 MongoDb Server 由于只是测试用，所以将所有的复制节点都放在一个服务器上，但是实际上该方案是不可取的，所以不推荐使用该文件夹下的 docker-compose 进行配置，如果有需求，请自行找方法在多个服务器上部署。

### 数据导入说明

#### 使用`backup`文件夹

整个测试需要的数据已经备份在 backup 文件夹中了，同时该文件夹也已经映射到 docker 中去了，通过该方法导入数据时，你只需要进入需要导入数据的容器，运行命令 `mongorestroe -d 集合名称 /backup/mongo-less 即可

#### 使用代码生成

在根目录下有一个 `genDatabase.py` 文件，该文件就是用于生成数据的，你需要做的就是在 config.py 中将相关 ip 配置好，然后运行该文件便可以将相关的数据进行导入。

此方法相比上边那个方法来说耗费的时间更多一点，所以请自行斟酌选择合适的方法导入
